
<!DOCTYPE html>
<html lang="zh-Hans">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="chenzhesheng的博客">
    <title>基于vmvare12虚拟机CentOS 7系统下搭建SVN版本控制系统 - chenzhesheng的博客</title>
    <meta name="author" content="陈哲生">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"陈哲生","sameAs":["https://github.com/","http://stackoverflow.com/users","https://twitter.com/","https://facebook.com/","https://plus.google.com/","https://www.linkedin.com/profile/","mailto"]},"articleBody":"** 基于vmvare12虚拟机CentOS 7系统下搭建SVN版本控制系统：** &lt;Excerpt in index | 首页摘要&gt;    如果你有空闲主机，放着吃尘，如果你想拥有属于自己的云存储，永久存储自己的文档，那么我建议你看看这篇文章。\n\n&lt;The rest of contents | 余下全文&gt;\n虚拟机版本：vmvare 12主宿机系统：Windows 7虚拟机系统：CentOS 7\n关于安装虚拟机的部分跳过，操作相对简单，网上有很多教程，大同小异。一、安装CentOS 7系统1.1 点击文件 - 新建虚拟机 - 典型 - 下一步\n1.2 安装程序光盘映像文件 - 下一步提前准备好的iso系统镜像文件，底部提供网盘下载链接。\n1.3 填写好登陆用户名与密码 - 下一步账号密码用于登陆到系统的。\n1.4 选择虚拟机存储位置 - 下一步机械硬盘不要存储在c盘，不然装不下。\n1.5 指定存储大小由于我们是用于存储文件的，有多大就用多大，不回占用硬盘的使用率，没有用到存储空间会释放出来。\n1.6 点击自定义硬件 - 把网络适配器更改为桥接模式桥接模式不用勾复制物理网络连接状态，如果此主机仅用于存储，可以把其他配置提到最优。完成，进入下一步。** 如果出现”Intel VT-x 处于禁用状态”错误，需要先进入到主机的bios界面，把 intel vt 虚拟化设置为开启状态。具体打开方式问度娘，因为厂商不同，打开方式不同。**\n二、安装svn版本控制登陆到系统后，修改系统语言、连接网络都在设置里面操作，右键桌面打开终端\n2.1 获取root权限进入到管理员角色，拥有root权限可以对很多系统文件夹进行操作。su root输入登陆密码，回车(密码是隐藏的，看不到*号照常输入就行）\n2.2 安装svnyum install -y subversion通过使用yum 可以简单轻松的安装svn。\n2.3 检验svn是否安装成功svnserve --version通过查看svn版本进行建议，打印出来不是报错信息，就说明安装成功，svnserve是svn服务的名称。\n2.4 创建版本库mkdir /home/svnsvnadmin create /home/svn/repo1这里在/home/svn目录下创建了一个名为repo1 的版本库。\n三、修改svn配置在创建完版本库后会在/svn                                                                                                                                                                          /repo1/conf 目录下生成 passwd 、authz、svnserve.conf 三个文件。\n3.1 修改 passwd 文件添加用户，设置用户密码，使用自带vim 进行编辑修改vi /home/svn/repo1/conf/passwd\n12345678910### This file is an example password file for svnserve.### Its format is similar to that of svnserve.conf. As shown in the### example below it contains one section labelled [users].### The name and password for each user follow, one account per line.[users]# harry = harryssecret# sally = sallyssecret# 添加用户名密码也比较简单，使用vi指令直接插入 [username] = [password]，例如：username = password\n\n3.2 修改 authz 文件对用户进行分组，以及配置用户读写权限vi /home/svn/repo1/conf/authz\n1234567891011121314151617181920[aliases]# 对用户进行别名操作,这个感觉一般很少用,毕竟我们在设置的用户名一般就不会太长# joe = /C=XZ/ST=Dessert/L=Snake City/O=Snake Oil, Ltd./OU=Research Institute/CN=Joe Average[groups]# 对用户进行分组操作,如果用户比较的多，并且权限不一致的情况下,可以进行分组# 组名 = 用户名,用户名....# harry_and_sally = harry,sally# harry_sally_and_joe = harry,sally,&amp;joe[/]#具体的目录 /表示当前版本库,如果当前版本库中不同的文件夹需要区分不同的权限,可以具体的配置username = rw# 设置用户或者组的具体的权限。svn对权限的控制分为r(读)以及w(写)# 用户名/组名 = 具体的权限# &amp;joe = r#[repository:/]# @harry_and_sally = rw#* = rw\n\n3.3 修改 svnserve.conf 文件，这是svn的具体配置文件，如果要使用到上面的 authz、 passwd，就需要修改配置该文件vi /home/svn/repo1/conf/authz\n123456[general]anon-access = readauth-access = writepassword-db = passwdauthz-db = authz\n\n3.4 配置完成，接下来就是开启svn的服务svnserve -d -r /home/svn/-d 指定svn在后台运行  -r 指定需要启动的版本库位置\n如果需要停止svn服务,就需要执行下面的命令进行关闭\n12ps -aux |grep svn   #查找svn的进程idkill -9 进程id  #直接关闭svn进程\n\n到这一步基本的svn配置就完成了，可以通过svn客户端测试是否能够正常使用。\n查看IP地址ip addr\n通过svn客户端的svn checkout功能进行检出，项目svn地址为：svn://ip地址/版本库名称\n四、开启防火墙端口开放假如你完成了以上配置仍然无法连接的话，那么可能是防火墙给拦截了，可以先试试关闭防火墙再测试（不建议正式环境下使用），或者开放svn的端口。\n4.1 常用命令123456systemctl start firewalld       #启动防火墙systemctl status firewalld       #查看防火墙状态systemctl stop firewalld          #关闭防火墙systemctl restart firewalld       #重启防火墙systemctl enable firewalld.service  #设置开机自启动systemctl disable firewalld.service  #关闭开机自启动\n\n4.2 开启svn的端口svn默认的端口是3690，在开启防火墙的同时支持svn外部访问只要执行以下步骤\n12firewall-cmd --add-port=3690/tcp --permanent firewall-cmd --reload\n\n4.3 关于防火墙配置的其他常用命令1234567891011firewall-cmd --state                           ##查看防火墙状态，是否是runningfirewall-cmd --reload                          ##重新载入配置，比如添加规则之后，需要执行此命令firewall-cmd --get-zones                       ##列出支持的zonefirewall-cmd --get-services                    ##列出支持的服务，在列表中的服务是放行的firewall-cmd --query-service ftp               ##查看ftp服务是否支持，返回yes或者nofirewall-cmd --add-service=ftp                 ##临时开放ftp服务firewall-cmd --add-service=ftp --permanent     ##永久开放ftp服务firewall-cmd --remove-service=ftp --permanent  ##永久移除ftp服务firewall-cmd --add-port=80/tcp --permanent     ##永久添加80端口 iptables -L -n                                 ##查看规则，这个命令是和iptables的相同的man firewall-cmd                               ##查看帮助\n\n五、开机自启SVN5.1 在开机自动文件中添加svn服务修改自启文件 /etc/rc.d/rc.localvi /etc/rc.d/rc.local\n123456# Please note that you must run 'chmod +x /etc/rc.d/rc.local' to ensure# that this script will be executed during boot.touch /var/lock/subsys/local/usr/bin/svnserve -d -r /home/svn   #指定svn路径\n\n5.2 修改权限chmod -X /etc/rc.d/rc.local修改后还是访问不了，提示没有权限，可以试着关闭selinux。\n5.3 关闭selinuxselinux 的开启，容易导致文件权限修改不了等问题，下面就是关闭设置selinux的方法。/usr/sbin/sestatus -v    #查看selinux的开启状态修改/etc/selinux/config 文件vi /etc/selinux/config\n12# mls - Multi Level Security protection.SELINUXTYPE=disabled   #修改为disabled\n\n重启系统即可\n六、通过花生壳外网访问由于公用ip有限，现在大部分使用的都是动态ip，没有固定ip无法进行外网访问，这个时候我们需要做 端口映射，让外网也能访问到我们的svn。为什么使用花生壳呢，名声在外，自己做的怕安全不足。\n6.1 使用端口映射跳过注册，下载软件部分，直接讲解使用花生壳的端口映射部分。内网主机填写的是虚拟机的内部IP，端口如果没有修改，默认使用的是3690。我们要映射的是svn的端口，所以这里选择应用类。端口映射也可以使用到挂载web项目上，如果需要使用web项目，需要修改映射类型。\n6.2 外网访问地址使用客户端svn的svn checkout功能测试，访问地址 svn://外网访问/repo1（repo1为版本库名称）注意：外网访问地址要包括端口\n七、附加说明7.1 更换虚拟分配的IP地址点击vmvare的编辑 - 虚拟网络编辑器直接修改子网ip，修改完记得重启。\n7.2 应用svn的pre-commit以及post-commit在/svn/repo1/hooks目录下的 pree-commit 是作用是强制用户填写提交信息,以方便代码的管理。\n123cp pre-commit.tmpl pre-commit  #将该模板文件重命名为pre-commit文件chmod 755 pre-commit #对该文件添加可执行权限 vi /svn/repo1/hooks/pree-commit     #修改pree-commit文件\n\n修改后代码如下：\n1234567891011#!/bin/shREPOS=\"$1\"TXN=\"$2\"SVNLOOK=svnlook #根据自己的具体情况,指定svnlook命令的具体的路径LOGMSG=`$SVNLOOK log -t \"$TXN\" \"$REPOS\" | grep \"[a-zA-Z0-9]\" | wc -c`#检测提交信息的长度,如果长度小于10个字符就报错if [ \"$LOGMSG\" -lt 10 ];then    echo \"Log message can't be empty! you must input more than 10 chars as comment!.\" 1&gt;&amp;2    exit 1fi\n\npost-commit 则可以把我们提交后的文件自动更新到某一目录下。\n123cp post-commit.tmpl post-commit  #将该模板文件重命名为post-commit文件chmod 755 post-commit #对该文件添加可执行权限 vi /svn/repo1/hooks/post-commit     #修改post-commit文件\n\n修改后代码如下：\n12345678REPOS=\"$1\"REV=\"$2\"#指定字符集,有的时候同步失败,可能就是字符集没有指定export LANG=\"zh_CN.UTF-8\" #调用svn update命令 将版本库中的文件同步到/home/svn/repo1文件中去#这里需要指定用户名以及密码svn update /home/svn/repo1  --username sunms --password james236 --no-auth-cache &gt;&gt; /var/svn-post.log\n\n链接：https://pan.baidu.com/s/1r6Y4LeolSpnwrcWGPy_nHg提取码：yz8t \n","dateCreated":"2019-01-30T16:21:37+08:00","dateModified":"2019-06-26T08:46:13+08:00","datePublished":"2019-01-30T16:21:37+08:00","description":"** 基于vmvare12虚拟机CentOS 7系统下搭建SVN版本控制系统：** &lt;Excerpt in index | 首页摘要&gt;    如果你有空闲主机，放着吃尘，如果你想拥有属于自己的云存储，永久存储自己的文档，那么我建议你看看这篇文章。","headline":"基于vmvare12虚拟机CentOS 7系统下搭建SVN版本控制系统","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"/www.chenzhesheng.cc/2019/01/30/基于vmvare12虚拟机CentOS 7系统下搭建SVN/"},"publisher":{"@type":"Organization","name":"陈哲生","sameAs":["https://github.com/","http://stackoverflow.com/users","https://twitter.com/","https://facebook.com/","https://plus.google.com/","https://www.linkedin.com/profile/","mailto"]},"url":"/www.chenzhesheng.cc/2019/01/30/基于vmvare12虚拟机CentOS 7系统下搭建SVN/","keywords":"linux"}</script>
    <meta name="description" content="** 基于vmvare12虚拟机CentOS 7系统下搭建SVN版本控制系统：** &amp;lt;Excerpt in index | 首页摘要&amp;gt;    如果你有空闲主机，放着吃尘，如果你想拥有属于自己的云存储，永久存储自己的文档，那么我建议你看看这篇文章。">
<meta name="keywords" content="linux">
<meta property="og:type" content="blog">
<meta property="og:title" content="基于vmvare12虚拟机CentOS 7系统下搭建SVN版本控制系统">
<meta property="og:url" content="www.chenzhesheng.cc/2019/01/30/基于vmvare12虚拟机CentOS 7系统下搭建SVN/index.html">
<meta property="og:site_name" content="chenzhesheng的博客">
<meta property="og:description" content="** 基于vmvare12虚拟机CentOS 7系统下搭建SVN版本控制系统：** &amp;lt;Excerpt in index | 首页摘要&amp;gt;    如果你有空闲主机，放着吃尘，如果你想拥有属于自己的云存储，永久存储自己的文档，那么我建议你看看这篇文章。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://blog.zsonchen.cn/2019-01-29-16-51-24.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
<meta property="og:image" content="http://blog.zsonchen.cn/2019-01-29-16-51-24.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
<meta property="og:image" content="http://blog.zsonchen.cn//2019-01-29-16-51-44.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
<meta property="og:image" content="http://blog.zsonchen.cn//2019-01-29-16-53-01.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
<meta property="og:image" content="http://blog.zsonchen.cn//2019-01-29-16-54-54.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
<meta property="og:image" content="http://blog.zsonchen.cn//2019-01-29-21-30-46.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
<meta property="og:image" content="http://blog.zsonchen.cn//2019-01-29-21-32-27.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
<meta property="og:image" content="http://blog.zsonchen.cn//2019-01-30-16-12-14.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
<meta property="og:image" content="http://blog.zsonchen.cn//2019-01-30-17-03-16.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
<meta property="og:image" content="http://blog.zsonchen.cn//2019-01-30-17-07-54.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
<meta property="og:image" content="http://blog.zsonchen.cn//2019-01-30-18-55-00.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
<meta property="og:image" content="http://blog.zsonchen.cn//2019-01-30-18-56-42.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
<meta property="og:image" content="http://blog.zsonchen.cn/wxchat_QR.jpg">
<meta property="og:updated_time" content="2019-06-26T00:46:13.952Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="基于vmvare12虚拟机CentOS 7系统下搭建SVN版本控制系统">
<meta name="twitter:description" content="** 基于vmvare12虚拟机CentOS 7系统下搭建SVN版本控制系统：** &amp;lt;Excerpt in index | 首页摘要&amp;gt;    如果你有空闲主机，放着吃尘，如果你想拥有属于自己的云存储，永久存储自己的文档，那么我建议你看看这篇文章。">
<meta name="twitter:image" content="http://blog.zsonchen.cn/2019-01-29-16-51-24.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/ "
            aria-label=""
        >
            chenzhesheng的博客
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Öffne den Link: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="Kategorien"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Kategorien</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="Tags"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="Archiv"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archiv</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                            title="Suche"
                        >
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Suche</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="Über"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Über</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="http://stackoverflow.com/users" target="_blank" rel="noopener" title="Stack Overflow">
                    
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://twitter.com/" target="_blank" rel="noopener" title="Twitter">
                    
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://facebook.com/" target="_blank" rel="noopener" title="Facebook">
                    
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://plus.google.com/" target="_blank" rel="noopener" title="Google Plus">
                    
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google Plus</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.linkedin.com/profile/" target="_blank" rel="noopener" title="LinkedIn">
                    
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/mailto"
                            title="E-Mail"
                        >
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">E-Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                            title="RSS"
                        >
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            基于vmvare12虚拟机CentOS 7系统下搭建SVN版本控制系统
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-01-30T16:21:37+08:00">
	
		    30 Jan 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/服务器/">服务器</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>** 基于vmvare12虚拟机CentOS 7系统下搭建SVN版本控制系统：** &lt;Excerpt in index | 首页摘要&gt;<br>    如果你有空闲主机，放着吃尘，如果你想拥有属于自己的云存储，永久存储自己的文档，那么我建议你看看这篇文章。</p>
<a id="more"></a>
<p>&lt;The rest of contents | 余下全文&gt;</p>
<p>虚拟机版本：vmvare 12<br>主宿机系统：Windows 7<br>虚拟机系统：CentOS 7</p>
<h5 id="关于安装虚拟机的部分跳过，操作相对简单，网上有很多教程，大同小异。"><a href="#关于安装虚拟机的部分跳过，操作相对简单，网上有很多教程，大同小异。" class="headerlink" title="关于安装虚拟机的部分跳过，操作相对简单，网上有很多教程，大同小异。"></a>关于安装虚拟机的部分跳过，操作相对简单，网上有很多教程，大同小异。</h5><h2 id="一、安装CentOS-7系统"><a href="#一、安装CentOS-7系统" class="headerlink" title="一、安装CentOS 7系统"></a>一、安装CentOS 7系统</h2><h4 id="1-1-点击文件-新建虚拟机-典型-下一步"><a href="#1-1-点击文件-新建虚拟机-典型-下一步" class="headerlink" title="1.1 点击文件 - 新建虚拟机 - 典型 - 下一步"></a>1.1 点击文件 - 新建虚拟机 - 典型 - 下一步</h4><p><img src="http://blog.zsonchen.cn/2019-01-29-16-51-24.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30" alt></p>
<h4 id="1-2-安装程序光盘映像文件-下一步"><a href="#1-2-安装程序光盘映像文件-下一步" class="headerlink" title="1.2 安装程序光盘映像文件 - 下一步"></a>1.2 安装程序光盘映像文件 - 下一步</h4><p><strong>提前准备好的iso系统镜像文件，底部提供网盘下载链接。</strong><br><img src="http://blog.zsonchen.cn/2019-01-29-16-51-24.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30" alt></p>
<h4 id="1-3-填写好登陆用户名与密码-下一步"><a href="#1-3-填写好登陆用户名与密码-下一步" class="headerlink" title="1.3 填写好登陆用户名与密码 - 下一步"></a>1.3 填写好登陆用户名与密码 - 下一步</h4><p><strong>账号密码用于登陆到系统的。</strong><br><img src="http://blog.zsonchen.cn//2019-01-29-16-51-44.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30" alt></p>
<h4 id="1-4-选择虚拟机存储位置-下一步"><a href="#1-4-选择虚拟机存储位置-下一步" class="headerlink" title="1.4 选择虚拟机存储位置 - 下一步"></a>1.4 选择虚拟机存储位置 - 下一步</h4><p><strong>机械硬盘不要存储在c盘，不然装不下。</strong><br><img src="http://blog.zsonchen.cn//2019-01-29-16-53-01.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30" alt></p>
<h4 id="1-5-指定存储大小"><a href="#1-5-指定存储大小" class="headerlink" title="1.5 指定存储大小"></a>1.5 指定存储大小</h4><p><strong>由于我们是用于存储文件的，有多大就用多大，不回占用硬盘的使用率，没有用到存储空间会释放出来。</strong><br><img src="http://blog.zsonchen.cn//2019-01-29-16-54-54.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30" alt></p>
<h4 id="1-6-点击自定义硬件-把网络适配器更改为桥接模式"><a href="#1-6-点击自定义硬件-把网络适配器更改为桥接模式" class="headerlink" title="1.6 点击自定义硬件 - 把网络适配器更改为桥接模式"></a>1.6 点击自定义硬件 - 把网络适配器更改为桥接模式</h4><p><strong>桥接模式不用勾复制物理网络连接状态，如果此主机仅用于存储，可以把其他配置提到最优。</strong><br><img src="http://blog.zsonchen.cn//2019-01-29-21-30-46.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30" alt><br><img src="http://blog.zsonchen.cn//2019-01-29-21-32-27.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30" alt><br>完成，进入下一步。<br>** 如果出现”Intel VT-x 处于禁用状态”错误，需要先进入到主机的bios界面，把 intel vt 虚拟化设置为开启状态。具体打开方式问度娘，因为厂商不同，打开方式不同。**</p>
<h2 id="二、安装svn版本控制"><a href="#二、安装svn版本控制" class="headerlink" title="二、安装svn版本控制"></a>二、安装svn版本控制</h2><p>登陆到系统后，修改系统语言、连接网络都在设置里面操作，右键桌面打开终端</p>
<h4 id="2-1-获取root权限"><a href="#2-1-获取root权限" class="headerlink" title="2.1 获取root权限"></a>2.1 获取root权限</h4><p>进入到管理员角色，拥有root权限可以对很多系统文件夹进行操作。<br><code>su root</code><br>输入登陆密码，回车(密码是隐藏的，看不到*号照常输入就行）</p>
<h4 id="2-2-安装svn"><a href="#2-2-安装svn" class="headerlink" title="2.2 安装svn"></a>2.2 安装svn</h4><p><code>yum install -y subversion</code><br>通过使用yum 可以简单轻松的安装svn。</p>
<h4 id="2-3-检验svn是否安装成功"><a href="#2-3-检验svn是否安装成功" class="headerlink" title="2.3 检验svn是否安装成功"></a>2.3 检验svn是否安装成功</h4><p><code>svnserve --version</code><br>通过查看svn版本进行建议，打印出来不是报错信息，就说明安装成功，svnserve是svn服务的名称。</p>
<h4 id="2-4-创建版本库"><a href="#2-4-创建版本库" class="headerlink" title="2.4 创建版本库"></a>2.4 创建版本库</h4><p><code>mkdir /home/svn</code><br><code>svnadmin create /home/svn/repo1</code><br>这里在/home/svn目录下创建了一个名为repo1 的版本库。</p>
<h2 id="三、修改svn配置"><a href="#三、修改svn配置" class="headerlink" title="三、修改svn配置"></a>三、修改svn配置</h2><p>在创建完版本库后会在/svn                                                                                                                                                                          /repo1/conf 目录下生成 <strong>passwd</strong> 、<strong>authz</strong>、<strong>svnserve.conf</strong> 三个文件。</p>
<h4 id="3-1-修改-passwd-文件添加用户，设置用户密码，使用自带vim-进行编辑修改"><a href="#3-1-修改-passwd-文件添加用户，设置用户密码，使用自带vim-进行编辑修改" class="headerlink" title="3.1 修改 passwd 文件添加用户，设置用户密码，使用自带vim 进行编辑修改"></a>3.1 修改 <strong>passwd</strong> 文件添加用户，设置用户密码，使用自带vim 进行编辑修改</h4><p><code>vi /home/svn/repo1/conf/passwd</code></p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">### This file is an example password file for svnserve.</span><br><span class="line">### Its format is similar to that <span class="keyword">of</span> svnserve.conf. As shown <span class="keyword">in</span> the</span><br><span class="line">### example below it contains one section labelled [users].</span><br><span class="line">### The name and password for each user follow, one account per line.</span><br><span class="line"></span><br><span class="line">[users]</span><br><span class="line"># harry = harryssecret</span><br><span class="line"># sally = sallyssecret</span><br><span class="line"># 添加用户名密码也比较简单，使用vi指令直接插入 [username] = [password]，例如：</span><br><span class="line">username = password</span><br></pre></td></tr></table></figure>

<h4 id="3-2-修改-authz-文件对用户进行分组，以及配置用户读写权限"><a href="#3-2-修改-authz-文件对用户进行分组，以及配置用户读写权限" class="headerlink" title="3.2 修改 authz 文件对用户进行分组，以及配置用户读写权限"></a>3.2 修改 <strong>authz</strong> 文件对用户进行分组，以及配置用户读写权限</h4><p><code>vi /home/svn/repo1/conf/authz</code></p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[aliases]</span><br><span class="line"><span class="meta"># 对用户进行别名操作,这个感觉一般很少用,毕竟我们在设置的用户名一般就不会太长</span></span><br><span class="line"><span class="meta"># joe = /C=XZ/ST=Dessert/L=Snake City/O=Snake Oil, Ltd./OU=Research Institute/CN=Joe Average</span></span><br><span class="line"></span><br><span class="line">[groups]</span><br><span class="line"><span class="meta"># 对用户进行分组操作,如果用户比较的多，并且权限不一致的情况下,可以进行分组</span></span><br><span class="line"><span class="meta"># 组名 = 用户名,用户名....</span></span><br><span class="line"><span class="meta"># harry_and_sally = harry,sally</span></span><br><span class="line"><span class="meta"># harry_sally_and_joe = harry,sally,&amp;joe</span></span><br><span class="line"></span><br><span class="line">[/]</span><br><span class="line"><span class="meta">#具体的目录 /表示当前版本库,如果当前版本库中不同的文件夹需要区分不同的权限,可以具体的配置</span></span><br><span class="line">username = rw</span><br><span class="line"><span class="meta"># 设置用户或者组的具体的权限。svn对权限的控制分为r(读)以及w(写)</span></span><br><span class="line"><span class="meta"># 用户名/组名 = 具体的权限</span></span><br><span class="line"><span class="meta"># &amp;joe = r</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#[repository:/]</span></span><br><span class="line"><span class="meta"># @harry_and_sally = rw</span></span><br><span class="line"><span class="meta">#* = rw</span></span><br></pre></td></tr></table></figure>

<h4 id="3-3-修改-svnserve-conf-文件，这是svn的具体配置文件，如果要使用到上面的-authz、-passwd，就需要修改配置该文件"><a href="#3-3-修改-svnserve-conf-文件，这是svn的具体配置文件，如果要使用到上面的-authz、-passwd，就需要修改配置该文件" class="headerlink" title="3.3 修改 svnserve.conf 文件，这是svn的具体配置文件，如果要使用到上面的 authz、 passwd，就需要修改配置该文件"></a>3.3 修改 <strong>svnserve.conf</strong> 文件，这是svn的具体配置文件，如果要使用到上面的 <strong>authz</strong>、 <strong>passwd</strong>，就需要修改配置该文件</h4><p><code>vi /home/svn/repo1/conf/authz</code></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[general]</span></span><br><span class="line"><span class="attr">anon-access</span> = read</span><br><span class="line"><span class="attr">auth-access</span> = write</span><br><span class="line"></span><br><span class="line"><span class="attr">password-db</span> = passwd</span><br><span class="line"><span class="attr">authz-db</span> = authz</span><br></pre></td></tr></table></figure>

<h4 id="3-4-配置完成，接下来就是开启svn的服务"><a href="#3-4-配置完成，接下来就是开启svn的服务" class="headerlink" title="3.4 配置完成，接下来就是开启svn的服务"></a>3.4 配置完成，接下来就是开启svn的服务</h4><p><code>svnserve -d -r /home/svn/</code><br>-d 指定svn在后台运行  -r 指定需要启动的版本库位置</p>
<p><strong>如果需要停止svn服务,就需要执行下面的命令进行关闭</strong></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -aux |<span class="keyword">grep</span> svn   <span class="comment">#查找svn的进程id</span></span><br><span class="line"><span class="keyword">kill</span> -<span class="number">9</span> 进程id  <span class="comment">#直接关闭svn进程</span></span><br></pre></td></tr></table></figure>

<p>到这一步基本的svn配置就完成了，可以通过svn客户端测试是否能够正常使用。</p>
<p>查看IP地址<br><code>ip addr</code><br><img src="http://blog.zsonchen.cn//2019-01-30-16-12-14.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30" alt></p>
<p>通过svn客户端的svn checkout功能进行检出，项目svn地址为：svn://ip地址/版本库名称</p>
<h2 id="四、开启防火墙端口开放"><a href="#四、开启防火墙端口开放" class="headerlink" title="四、开启防火墙端口开放"></a>四、开启防火墙端口开放</h2><p>假如你完成了以上配置仍然无法连接的话，那么可能是防火墙给拦截了，可以先试试关闭防火墙再测试（<strong>不建议正式环境下使用</strong>），或者开放svn的端口。</p>
<h4 id="4-1-常用命令"><a href="#4-1-常用命令" class="headerlink" title="4.1 常用命令"></a>4.1 常用命令</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="keyword">start</span> firewalld       <span class="comment">#启动防火墙</span></span><br><span class="line">systemctl <span class="keyword">status</span> firewalld       <span class="comment">#查看防火墙状态</span></span><br><span class="line">systemctl <span class="keyword">stop</span> firewalld          <span class="comment">#关闭防火墙</span></span><br><span class="line">systemctl restart firewalld       <span class="comment">#重启防火墙</span></span><br><span class="line">systemctl <span class="keyword">enable</span> firewalld.service  <span class="comment">#设置开机自启动</span></span><br><span class="line">systemctl <span class="keyword">disable</span> firewalld.service  <span class="comment">#关闭开机自启动</span></span><br></pre></td></tr></table></figure>

<h4 id="4-2-开启svn的端口"><a href="#4-2-开启svn的端口" class="headerlink" title="4.2 开启svn的端口"></a>4.2 开启svn的端口</h4><p>svn默认的端口是3690，在开启防火墙的同时支持svn外部访问只要执行以下步骤</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --add-port=3690/tcp --permanent </span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --reload</span></span><br></pre></td></tr></table></figure>

<h4 id="4-3-关于防火墙配置的其他常用命令"><a href="#4-3-关于防火墙配置的其他常用命令" class="headerlink" title="4.3 关于防火墙配置的其他常用命令"></a>4.3 关于防火墙配置的其他常用命令</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --state                           <span class="comment">##查看防火墙状态，是否是running</span></span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --reload                          <span class="comment">##重新载入配置，比如添加规则之后，需要执行此命令</span></span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --get-zones                       <span class="comment">##列出支持的zone</span></span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --get-services                    <span class="comment">##列出支持的服务，在列表中的服务是放行的</span></span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --query-service ftp               <span class="comment">##查看ftp服务是否支持，返回yes或者no</span></span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --add-service=ftp                 <span class="comment">##临时开放ftp服务</span></span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --add-service=ftp --permanent     <span class="comment">##永久开放ftp服务</span></span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --remove-service=ftp --permanent  <span class="comment">##永久移除ftp服务</span></span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --add-port=80/tcp --permanent     <span class="comment">##永久添加80端口 </span></span></span><br><span class="line">iptables -L -n                                 <span class="comment">##查看规则，这个命令是和iptables的相同的</span></span><br><span class="line">man firewall-<span class="keyword">cmd</span><span class="bash">                               <span class="comment">##查看帮助</span></span></span><br></pre></td></tr></table></figure>

<h2 id="五、开机自启SVN"><a href="#五、开机自启SVN" class="headerlink" title="五、开机自启SVN"></a>五、开机自启SVN</h2><h4 id="5-1-在开机自动文件中添加svn服务"><a href="#5-1-在开机自动文件中添加svn服务" class="headerlink" title="5.1 在开机自动文件中添加svn服务"></a>5.1 在开机自动文件中添加svn服务</h4><p>修改自启文件 /etc/rc.d/rc.local<br><code>vi /etc/rc.d/rc.local</code></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Please note that you must run 'chmod +x /etc/rc.d/rc.local' to ensure</span></span><br><span class="line"><span class="comment"># that this script will be executed during boot.</span></span><br><span class="line"></span><br><span class="line">touch <span class="regexp">/var/</span>lock<span class="regexp">/subsys/</span>local</span><br><span class="line"></span><br><span class="line"><span class="regexp">/usr/</span>bin<span class="regexp">/svnserve -d -r /</span>home<span class="regexp">/svn   #指定svn路径</span></span><br></pre></td></tr></table></figure>

<h4 id="5-2-修改权限"><a href="#5-2-修改权限" class="headerlink" title="5.2 修改权限"></a>5.2 修改权限</h4><p><code>chmod -X /etc/rc.d/rc.local</code><br>修改后还是访问不了，提示没有权限，可以试着关闭selinux。</p>
<h4 id="5-3-关闭selinux"><a href="#5-3-关闭selinux" class="headerlink" title="5.3 关闭selinux"></a>5.3 关闭selinux</h4><p>selinux 的开启，容易导致文件权限修改不了等问题，下面就是关闭设置selinux的方法。<br><code>/usr/sbin/sestatus -v    #查看selinux的开启状态</code><br>修改/etc/selinux/config 文件<br><code>vi /etc/selinux/config</code></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mls - Multi Level Security protection.</span></span><br><span class="line"><span class="attr">SELINUXTYPE</span>=disabled   <span class="comment">#修改为disabled</span></span><br></pre></td></tr></table></figure>

<p>重启系统即可</p>
<h2 id="六、通过花生壳外网访问"><a href="#六、通过花生壳外网访问" class="headerlink" title="六、通过花生壳外网访问"></a>六、通过花生壳外网访问</h2><p>由于公用ip有限，现在大部分使用的都是动态ip，没有固定ip无法进行外网访问，这个时候我们需要做 <strong>端口映射</strong>，让外网也能访问到我们的svn。为什么使用花生壳呢，名声在外，自己做的怕安全不足。</p>
<h4 id="6-1-使用端口映射"><a href="#6-1-使用端口映射" class="headerlink" title="6.1 使用端口映射"></a>6.1 使用端口映射</h4><p>跳过注册，下载软件部分，直接讲解使用花生壳的端口映射部分。<br><img src="http://blog.zsonchen.cn//2019-01-30-17-03-16.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30" alt><br>内网主机填写的是虚拟机的内部IP，端口如果没有修改，默认使用的是3690。<br>我们要映射的是svn的端口，所以这里选择应用类。端口映射也可以使用到挂载web项目上，如果需要使用web项目，需要修改映射类型。</p>
<h4 id="6-2-外网访问地址"><a href="#6-2-外网访问地址" class="headerlink" title="6.2 外网访问地址"></a>6.2 外网访问地址</h4><p>使用客户端svn的svn checkout功能测试，访问地址 svn://外网访问/repo1（repo1为版本库名称）<br><strong>注意：外网访问地址要包括端口</strong><br><img src="http://blog.zsonchen.cn//2019-01-30-17-07-54.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30" alt></p>
<h2 id="七、附加说明"><a href="#七、附加说明" class="headerlink" title="七、附加说明"></a>七、附加说明</h2><h4 id="7-1-更换虚拟分配的IP地址"><a href="#7-1-更换虚拟分配的IP地址" class="headerlink" title="7.1 更换虚拟分配的IP地址"></a>7.1 更换虚拟分配的IP地址</h4><p>点击vmvare的编辑 - 虚拟网络编辑器<br><img src="http://blog.zsonchen.cn//2019-01-30-18-55-00.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30" alt><br>直接修改子网ip，修改完记得重启。<br><img src="http://blog.zsonchen.cn//2019-01-30-18-56-42.jpg?imageView2/0/q/100%7Cwatermark/2/text/5YWs5LyX5Y-377ya5oqA5pyv5bCP5L2c5Z2K/font/5a6L5L2T/fontsize/480/fill/I0JEQjdCNw==/dissolve/50/gravity/SouthEast/dx/30/dy/30" alt></p>
<h4 id="7-2-应用svn的pre-commit以及post-commit"><a href="#7-2-应用svn的pre-commit以及post-commit" class="headerlink" title="7.2 应用svn的pre-commit以及post-commit"></a>7.2 应用svn的pre-commit以及post-commit</h4><p>在/svn/repo1/hooks目录下的 <strong>pree-commit</strong> 是作用是强制用户填写提交信息,以方便代码的管理。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp pre-commit.tmpl pre-<span class="keyword">commit</span>  <span class="comment">#将该模板文件重命名为pre-commit文件</span></span><br><span class="line">chmod <span class="number">755</span> pre-<span class="keyword">commit</span> <span class="comment">#对该文件添加可执行权限 </span></span><br><span class="line">vi /svn/repo1/hooks/pree-<span class="keyword">commit</span>     <span class="comment">#修改pree-commit文件</span></span><br></pre></td></tr></table></figure>

<p>修改后代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">REPOS=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">TXN=<span class="string">"<span class="variable">$2</span>"</span></span><br><span class="line">SVNLOOK=svnlook <span class="comment">#根据自己的具体情况,指定svnlook命令的具体的路径</span></span><br><span class="line">LOGMSG=`<span class="variable">$SVNLOOK</span> <span class="built_in">log</span> -t <span class="string">"<span class="variable">$TXN</span>"</span> <span class="string">"<span class="variable">$REPOS</span>"</span> | grep <span class="string">"[a-zA-Z0-9]"</span> | wc -c`</span><br><span class="line"><span class="comment">#检测提交信息的长度,如果长度小于10个字符就报错</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$LOGMSG</span>"</span> -lt 10 ];</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Log message can't be empty! you must input more than 10 chars as comment!."</span> 1&gt;&amp;2</span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p><strong>post-commit</strong> 则可以把我们提交后的文件自动更新到某一目录下。</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp <span class="built_in">post</span>-commit.tmpl <span class="built_in">post</span>-commit  <span class="comment">#将该模板文件重命名为post-commit文件</span></span><br><span class="line">chmod <span class="number">755</span> <span class="built_in">post</span>-commit <span class="comment">#对该文件添加可执行权限 </span></span><br><span class="line">vi /svn/repo1/hooks/<span class="built_in">post</span>-commit     <span class="comment">#修改post-commit文件</span></span><br></pre></td></tr></table></figure>

<p>修改后代码如下：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">REPOS</span>=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line"><span class="attribute">REV</span>=<span class="string">"<span class="variable">$2</span>"</span></span><br><span class="line"><span class="comment">#指定字符集,有的时候同步失败,可能就是字符集没有指定</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LANG</span>=<span class="string">"zh_CN.UTF-8"</span> </span><br><span class="line"><span class="comment">#调用svn update命令 将版本库中的文件同步到/home/svn/repo1文件中去</span></span><br><span class="line"><span class="comment">#这里需要指定用户名以及密码</span></span><br><span class="line">svn update /home/svn/repo1  --username sunms --password james236 </span><br><span class="line">--no-auth-cache &gt;&gt; /var/svn-post.log</span><br></pre></td></tr></table></figure>

<p><img src="http://blog.zsonchen.cn/wxchat_QR.jpg" alt><br>链接：<a href="https://pan.baidu.com/s/1r6Y4LeolSpnwrcWGPy_nHg" target="_blank" rel="noopener">https://pan.baidu.com/s/1r6Y4LeolSpnwrcWGPy_nHg</a><br>提取码：yz8t </p>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">GETAGGT IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/linux/">linux</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a
                        class="post-action-btn btn btn--disabled"
                        aria-hidden="true"
                    >
                        
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">FRÜHER</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2018/04/19/Dagger2注解框架在kotlin中的使用/"
                    data-tooltip="Dagger2注解框架在kotlin中的使用"
                    aria-label="NÄCHSTER: Dagger2注解框架在kotlin中的使用"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NÄCHSTER</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=www.chenzhesheng.cc/2019/01/30/基于vmvare12虚拟机CentOS 7系统下搭建SVN/"
                    title="Teilen auf Facebook"
                    aria-label="Teilen auf Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=www.chenzhesheng.cc/2019/01/30/基于vmvare12虚拟机CentOS 7系统下搭建SVN/"
                    title="Teilen auf Twitter"
                    aria-label="Teilen auf Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=www.chenzhesheng.cc/2019/01/30/基于vmvare12虚拟机CentOS 7系统下搭建SVN/"
                    title="Teilen auf Google Plus"
                    aria-label="Teilen auf Google Plus"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 陈哲生. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a
                        class="post-action-btn btn btn--disabled"
                        aria-hidden="true"
                    >
                        
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">FRÜHER</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2018/04/19/Dagger2注解框架在kotlin中的使用/"
                    data-tooltip="Dagger2注解框架在kotlin中的使用"
                    aria-label="NÄCHSTER: Dagger2注解框架在kotlin中的使用"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NÄCHSTER</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=www.chenzhesheng.cc/2019/01/30/基于vmvare12虚拟机CentOS 7系统下搭建SVN/"
                    title="Teilen auf Facebook"
                    aria-label="Teilen auf Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=www.chenzhesheng.cc/2019/01/30/基于vmvare12虚拟机CentOS 7系统下搭建SVN/"
                    title="Teilen auf Twitter"
                    aria-label="Teilen auf Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=www.chenzhesheng.cc/2019/01/30/基于vmvare12虚拟机CentOS 7系统下搭建SVN/"
                    title="Teilen auf Google Plus"
                    aria-label="Teilen auf Google Plus"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=www.chenzhesheng.cc/2019/01/30/基于vmvare12虚拟机CentOS 7系统下搭建SVN/"
                        aria-label="Teilen auf Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Teilen auf Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=www.chenzhesheng.cc/2019/01/30/基于vmvare12虚拟机CentOS 7系统下搭建SVN/"
                        aria-label="Teilen auf Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Teilen auf Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=www.chenzhesheng.cc/2019/01/30/基于vmvare12虚拟机CentOS 7系统下搭建SVN/"
                        aria-label="Teilen auf Google Plus"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Teilen auf Google Plus</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">陈哲生</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->


    




    </body>
</html>
